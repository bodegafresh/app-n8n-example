<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DOJO · Wing Chun · n8n</title>
  <meta name="description" content="Demo: la web consulta un webhook de n8n y muestra la respuesta. Estética Bruce Lee / Wing Chun.">
  <style>
    :root{
      --bg:#0a0a0a;
      --panel:#111317;
      --panel-2:#0d1014;
      --text:#f6f7f9;
      --muted:#bfc5ce;
      --gold:#ffd52e;        /* botón */
      --gold-2:#f7c325;      /* hover/gradiente */
      --ok:#16a34a;
      --err:#ef4444;
      --ring:rgba(255,213,46,.35);
    }

    html,body{height:100%}
    body{
      margin:0; color:var(--text);
      background:
        radial-gradient(900px 600px at 80% -10%, rgba(255,213,46,.06), transparent 60%),
        radial-gradient(700px 500px at -10% 110%, rgba(255,213,46,.05), transparent 60%),
        #0a0a0a;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, sans-serif;
      display:grid; place-items:center; padding:24px;
    }

    /* barra sutíl de acento (reemplaza la franja diagonal) */
    .bar{
      position:fixed; top:0; left:0; right:0; height:10px; z-index:0;
      background: linear-gradient(90deg, #1a1a1a 0 20%, var(--gold) 20% 80%, #1a1a1a 80% 100%);
      box-shadow: 0 6px 20px rgba(0,0,0,.35);
    }

    .wrap{ width:min(980px, 94vw); position:relative; z-index:1 }

    .head{ display:flex; align-items:center; gap:14px; margin:6px 0 16px }
    .seal{
      width:44px; height:44px; border-radius:10px;
      background: radial-gradient(circle at 30% 25%, var(--gold), var(--gold-2));
      box-shadow: 0 6px 28px rgba(247,195,37,.18), inset 0 0 0 2px rgba(0,0,0,.35);
      display:grid; place-items:center;
    }
    .seal svg{ width:26px; height:26px }

    h1{ margin:0; font-size: clamp(22px, 3.2vw, 30px); letter-spacing:.2px }
    .lead{ margin:4px 0 18px; color:var(--muted) }

    .card{
      background: linear-gradient(180deg, var(--panel) 0%, var(--panel-2) 100%);
      border:1px solid rgba(255,255,255,.10);
      border-radius:20px; padding:24px;
      box-shadow: 0 24px 60px rgba(0,0,0,.28);
    }

    .grid{ display:grid; grid-template-columns: 1.1fr 1fr; gap:18px }
    @media (max-width:920px){ .grid{ grid-template-columns:1fr } }

    .panel{
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.1);
      border-radius:14px; padding:16px;
    }

    /* BOTÓN: mucho más visible */
    .actions{ display:flex; align-items:center; gap:14px; flex-wrap:wrap }
    .btn{
      appearance:none; border:0; cursor:pointer;
      background: linear-gradient(180deg, var(--gold) 0%, var(--gold-2) 100%);
      color:#0a0a0a; font-weight:900; letter-spacing:.2px;
      padding:16px 22px; border-radius:14px;
      box-shadow: 0 12px 28px rgba(255,213,46,.25), inset 0 -2px 0 rgba(0,0,0,.24);
      transition: transform .12s ease, filter .2s ease, box-shadow .2s ease;
      display:inline-flex; align-items:center; gap:10px; font-size:16px;
    }
    .btn:hover{ transform: translateY(-1px); filter:brightness(1.05) }
    .btn:active{ transform: translateY(0) scale(.98) }
    .btn[disabled]{ opacity:.65; cursor:progress }
    .btn:focus-visible{ outline:3px solid var(--ring); outline-offset:2px }

    .ctaIcon{ width:18px; height:18px }

    .status{ color:var(--muted); font-size:14px }
    .dot{ width:10px; height:10px; border-radius:999px; display:inline-block; vertical-align:middle; margin-right:6px }
    .ok{ background:var(--ok) } .err{ background:var(--err) } .idle{ background:#8a8a8a }

    .result{
      font:14px ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      background:#0c1015; border:1px dashed rgba(255,255,255,.16);
      border-radius:12px; padding:14px; min-height:56px; white-space:pre-wrap;
      box-shadow: inset 0 0 14px rgba(0,0,0,.35);
    }

    .note{ margin-top:10px; font-size:12px; color:var(--muted) }
  </style>
</head>
<body>
  <div class="bar" aria-hidden="true"></div>

  <div class="wrap">
    <header class="head">
      <div class="seal" aria-hidden="true">
        <!-- puño -->
        <svg viewBox="0 0 24 24" fill="none" role="img">
          <path d="M5 11c0-2 1-3 3-3h1M9 8h2M11 8h2M13 8h2c2 0 3 1 3 3v3c0 3-2 5-5 5H9c-3 0-5-2-5-5v-1"
                stroke="#0a0a0a" stroke-width="2" />
        </svg>
      </div>
      <div>
        <h1>SAAS · ACME · n8n</h1>
        <p class="lead">Velocidad y precisión: la web consulta un <strong>webhook</strong> y muestra su respuesta.</p>
      </div>
    </header>

    <main class="card">
      <div class="grid">
        <section class="panel">
          <h3 style="margin:0 0 8px">Técnica</h3>
          <p class="status" id="status"><span class="dot idle"></span>Listo</p>

          <div class="actions" style="margin-top:12px">
            <button id="btn" class="btn" type="button">
              <svg class="ctaIcon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M5 12h14M13 5l7 7-7 7" stroke="#0a0a0a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span id="btnText">Llamar a n8n</span>
            </button>
          </div>

          <p class="note">Acción: esta app hace <code>GET /api/hola</code> y el servidor reenvía un <code>POST</code> al webhook de n8n.</p>
        </section>

        <section class="panel">
          <h3 style="margin:0 0 8px">Resultado</h3>
          <div id="out" class="result" aria-live="polite"></div>
        </section>
      </div>
    </main>

    <p class="note" style="text-align:center;margin-top:14px">Empresa ACME.</p>
  </div>

  <script>
    const btn = document.getElementById("btn");
    const btnText = document.getElementById("btnText");
    const out = document.getElementById("out");
    const statusEl = document.getElementById("status");

    function setStatus(kind, text){
      const color = kind === "ok" ? "var(--ok)" : kind === "err" ? "var(--err)" : "#8a8a8a";
      statusEl.innerHTML = `<span class="dot" style="background:${color}"></span>${text}`;
    }

    async function callN8n(){
      btn.disabled = true;
      btnText.textContent = "Llamando…";
      setStatus("idle","Llamando al webhook");
      out.textContent = "";

      try{
        const r = await fetch("/api/hola");
        const txt = await r.text();
        if(!r.ok){
          setStatus("err","Error");
          out.textContent = `⚠️ n8n devolvió ${r.status}:\n${txt}`;
        }else{
          setStatus("ok","Éxito");
          out.textContent = txt; // “hola mundo”
        }
      }catch(e){
        setStatus("err","Fallo de red");
        out.textContent = "❌ Error llamando a n8n: " + e.message;
      }finally{
        btn.disabled = false;
        btnText.textContent = "Llamar a n8n";
      }
    }

    btn.addEventListener("click", callN8n);
  </script>
</body>
</html>
